/// Builds a selector for a motion class, using the settings defined in the `$motion-ui-classes` and `$motion-ui-states` maps.
/// @param {String|List} $states - One or more strings that correlate to a state.
/// @param {Boolean} $active - Defines if the selector is for the setup or active class.
/// @return {String} A selector that can be interpolated into your Sass code.
@function build-selector($states, $active: false) {
  $return: '';
  $chain: map-get($motion-ui-classes, append);
  
  $prefix: if($chain, '&.', '&-');
  $prefix: $prefix + map-get($motion-ui-classes, prefix);
  
  $suffix: if($active, map-get($motion-ui-classes, active), '');
  
  @each $sel in $states {
    $return: $return + $prefix + $sel + $suffix + ', ';
  }
  
  @return str-slice($return, 1, -3);
}

// Applies transition settings common to all mixins
@mixin transition-basics(
  $duration: $motion-duration-default,
  $timing: $motion-timing-default,
  $delay: $motion-delay-default
) {
  transition-duration: $duration;
  transition-timing-function: $timing;

  @if $delay > 0 {
    transition-delay: $delay;
  }
}

// Wraps content in an enter/leave class, chained to the parent selector
// Define the initial state of a transition here
@mixin transition-start($dir) {
  $selector: build-selector(map-get($motion-ui-states, $dir));
    
  #{$selector} {
    @content;
  }
}

// Wraps content in an enter/leave active class, chained to the matching
// enter/leave class, chained to the parent selector
// Define the end state of a transition here
@mixin transition-end($dir) {
  $selector: build-selector(map-get($motion-ui-states, $dir), true);
    
  #{$selector} {
    @content;
  }
}

/// Adds styles for a stagger animation, which can be used with Angular's `ng-repeat`.
/// @param {Number} $delay-amount - Amount of time in seconds or milliseconds to add between each item's animation.
@mixin stagger($delay-amount) {
  transition-delay: $delay-amount;

  // Prevent accidental CSS inheritance
  transition-duration: 0;
}

/// Removes the unit (e.g. px, em, rem) from a value, returning the number only.
/// @param {number} $num - Number to strip unit from.
/// @return The same number, sans unit.
@function strip-unit($num) {
  @return $num / ($num * 0 + 1);
}

/// Converts a turn unit to the equivalent unit in degrees. 1turn is equal to 360 degrees. Not all browsers support turn, so this function allows us to use turns while outputting a value that all browsers understand.
/// @param {number} $value - Turn value to convert.
/// @return The same value, but in degrees.
@function turn-to-deg($value) {
  @return strip-unit($value) * 360deg;
}